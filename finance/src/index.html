<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8">
  <title>Calculateur Finance</title>
  <base href="/">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Calculateur Finance - Simulateurs financiers et immobiliers gratuits pour optimiser vos décisions.">
  <meta name="author" content="Calculateur Finance">
  <link rel="icon" type="image/x-icon" href="./assets/favicon.ico">

  <!-- Preload polices critiques pour améliorer LCP -->
  <link rel="preload" href="./assets/fonts/primeicons.woff2" as="font" type="font/woff2" crossorigin>

  <!-- Police système pour éviter le téléchargement de Inter (400+ KiB) -->
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
    }
  </style>

  <!-- Autoriser le collage dans tous les inputs (accessibilité) -->
  <script>
    // Permettre le collage dans les champs PrimeNG InputNumber
    document.addEventListener('DOMContentLoaded', function() {
      document.addEventListener('paste', function(e) {
        // Ne pas bloquer le collage sur les inputs
        if (e.target && (e.target.tagName === 'INPUT' || e.target.tagName === 'TEXTAREA')) {
          return true;
        }
      }, true);
    });
  </script>

  <!-- Différer le chargement des scripts tiers pour améliorer TBT/LCP -->
  <script>
    // Charger les scripts tiers après le chargement de la page
    function loadDeferredScripts() {
      // CMP
      var cmp = document.createElement('script');
      cmp.src = './assets/cmp.js';
      cmp.async = true;
      document.head.appendChild(cmp);

      // AdSense
      var ads = document.createElement('script');
      ads.src = 'https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1143701991257525';
      ads.async = true;
      ads.crossOrigin = 'anonymous';
      document.head.appendChild(ads);

      // Google Analytics
      var gtag = document.createElement('script');
      gtag.src = 'https://www.googletagmanager.com/gtag/js?id=G-XXXXXXXXXX';
      gtag.async = true;
      document.head.appendChild(gtag);
    }

    // Charger après l'événement load ou après 3 secondes (ce qui arrive en premier)
    if (document.readyState === 'complete') {
      setTimeout(loadDeferredScripts, 100);
    } else {
      window.addEventListener('load', function() {
        setTimeout(loadDeferredScripts, 100);
      });
    }

    // Google Analytics initialization
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-XXXXXXXXXX');
  </script>
</head>
<body>
  <app-root></app-root>
</body>
</html>
