<main>
  <h1>Simulateur de crÃ©dit lombard</h1>

<form [formGroup]="form" (ngSubmit)="calculer()" class="form-lombard">
  <p-panel header="ParamÃ¨tres du crÃ©dit">
    <div class="p-fluid grid">
      <div class="flex-auto">
        <p-floatLabel>
          <p-inputNumber inputId="taux" formControlName="taux" mode="decimal" [minFractionDigits]="2" suffix=" %" />
          <label for="taux">Taux d'intÃ©rÃªt annuel</label>
        </p-floatLabel>
      </div>

      <div class="flex-auto">
        <p-floatLabel>
          <p-inputNumber inputId="duree" formControlName="duree" [min]="1"  />
          <label for="duree">DurÃ©e du prÃªt (en annÃ©es)</label>
        </p-floatLabel>
      </div>
    </div>
  </p-panel>

  <p-panel header="Actifs donnÃ©s en garantie">
    <div formArrayName="actifs">
      <div *ngFor="let actif of actifs.controls; let i = index" [formGroupName]="i" class="p-fluid grid border-round surface-100 p-3 mb-3">
        <div class="flex-auto">
          <p-dropdown 
            formControlName="type"
            [options]="typesActifs"
            optionLabel="label"
            optionValue="value"
            placeholder="Type d'actif"
          ></p-dropdown>
        </div>
        <div class="flex-auto">
          <p-floatLabel>
            <p-inputNumber inputId="valeur" formControlName="valeur" mode="currency" currency="EUR" />
            <label for="valeur">Valeur de lâ€™actif</label>
          </p-floatLabel>
        </div>
        <div class="flex-auto flex align-items-center justify-content-end">
          <button pButton icon="pi pi-trash" class="p-button-danger" type="button" (click)="removeActif(i)" *ngIf="actifs.length > 1"></button>
        </div>
      </div>
    </div>

    <button pButton icon="pi pi-plus" label="Ajouter un actif" type="button" (click)="addActif()" class="mt-2"></button>
  </p-panel>

  <button pButton type="submit" label="Calculer" class="p-button-success"></button>
</form>

<p-panel *ngIf="resultat" header="RÃ©sultats de la simulation" class="mt-4">
  <p>ğŸ›¡ï¸ Montant total mobilisable en garantie : <strong>{{ resultat.montantGarantieTotal | currency:'EUR' }}</strong></p>
  <p>ğŸ’° Montant empruntable : <strong>{{ resultat.capitalEmpruntable | currency:'EUR' }}</strong></p>
  <p>ğŸ“† MensualitÃ© de remboursement : <strong>{{ resultat.mensualite | currency:'EUR' }}</strong> sur {{ resultat.duree }} mois</p>
  <p>ğŸ’° Montant total mis en nantis <strong>{{ resultat.nantis | currency:'EUR' }}</strong>
  <p>ğŸ’° Cout total du crÃ©dit <strong>{{ resultat.coutTotalCredit | currency:'EUR' }}</strong>

</p-panel>

  <br><div class="separator"></div><br>

<section class="faq-section" aria-label="Foire aux questions - CrÃ©dit Lombard">
  <h2>FAQ - CrÃ©dit Lombard</h2>
  <dl>
    <dt>Quâ€™est-ce quâ€™un crÃ©dit lombard ?</dt>
    <dd>Le crÃ©dit lombard est un prÃªt adossÃ© Ã  un portefeuille de valeurs mobiliÃ¨res (actions, obligations, OPCVM, assurance-vie en unitÃ©s de compte) servant de garantie sans Ãªtre vendu.</dd>

    <dt>Quels types dâ€™actifs peuvent Ãªtre utilisÃ©s en garantie ?</dt>
    <dd>Les actifs les plus courants sont les actions cotÃ©es, les obligations, les OPCVM, et les contrats dâ€™assurance-vie en unitÃ©s de compte, sous conditions de liquiditÃ© et de volatilitÃ©.</dd>

    <dt>Quelle est la quotitÃ© maximale dâ€™un crÃ©dit lombard ?</dt>
    <dd>Elle varie de 50 % Ã  90 % selon le type dâ€™actif, sa qualitÃ©, sa liquiditÃ© et la politique de la banque.</dd>

    <dt>Combien puis-je emprunter avec un portefeuille de 100 000 â‚¬ ?</dt>
    <dd>Avec une quotitÃ© de 70 %, vous pouvez emprunter jusquâ€™Ã  70 000 â‚¬ sans vendre vos actifs.</dd>

    <dt>Quel est le taux dâ€™intÃ©rÃªt moyen dâ€™un crÃ©dit lombard ?</dt>
    <dd>Il varie entre 2 % et 5 %, souvent indexÃ© sur un taux de rÃ©fÃ©rence (ex. Euribor), selon la durÃ©e, le montant et votre profil.</dd>

    <dt>Quelle est la durÃ©e typique dâ€™un crÃ©dit lombard ?</dt>
    <dd>La durÃ©e est souvent de 1 Ã  5 ans, mais certaines banques peuvent proposer des durÃ©es plus longues selon les garanties.</dd>

    <dt>Quels sont les risques dâ€™un crÃ©dit lombard ?</dt>
    <dd>Le principal risque est lâ€™appel de marge : si la valeur des actifs baisse trop, la banque peut demander un remboursement ou vendre une partie du portefeuille.</dd>

    <dt>Peut-on rembourser un crÃ©dit lombard par anticipation ?</dt>
    <dd>Oui, le remboursement anticipÃ© est gÃ©nÃ©ralement possible Ã  tout moment sans frais, selon les conditions contractuelles.</dd>

    <dt>Le crÃ©dit lombard impacte-t-il la fiscalitÃ© ?</dt>
    <dd>Non, puisque les actifs ne sont pas vendus, il nâ€™y a pas de plus-value imposable. En revanche, les intÃ©rÃªts du prÃªt ne sont pas toujours dÃ©ductibles.</dd>

    <dt>Pourquoi utiliser un crÃ©dit lombard ?</dt>
    <dd>Il permet de financer un besoin temporaire (achat immobilier, investissement, fiscalitÃ©) tout en conservant son exposition aux marchÃ©s financiers.</dd>
  </dl>
</section>

</main>
