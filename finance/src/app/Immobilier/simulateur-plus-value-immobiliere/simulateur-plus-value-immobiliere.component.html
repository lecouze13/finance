<main>
  <h1>Simulateur de Plus-Value Immobilière – Calculez votre imposition</h1>
  <p>Estimez la plus-value sur la vente d’un bien immobilier et l’impôt à payer en fonction de votre situation.</p>
  <br>

  <div class="separator"></div><br>
  <div class="card p-fluid flex flex-wrap gap-4">
    <div class="flex-auto">
      <p-floatLabel>
        <p-inputNumber [(ngModel)]="prixAchat" inputId="achat" mode="currency" currency="EUR" />
        <label for="achat">Prix d'achat</label>
      </p-floatLabel>
    </div>

    <div class="flex-auto">
      <p-floatLabel>
        <p-inputNumber [(ngModel)]="fraisAchat" inputId="frais" mode="currency" currency="EUR" />
        <label for="frais">Frais d'acquisition (notaire...)</label>
      </p-floatLabel>
    </div>

    <div class="flex-auto">
      <p-floatLabel>
        <p-inputNumber [(ngModel)]="travaux" inputId="travaux" mode="currency" currency="EUR" />
        <label for="travaux">Montant des travaux</label>
      </p-floatLabel>
    </div>

    <div class="flex-auto">
      <p-floatLabel>
        <p-inputNumber [(ngModel)]="prixVente" inputId="vente" mode="currency" currency="EUR" />
        <label for="vente">Prix de vente</label>
      </p-floatLabel>
    </div>

    <div class="flex-auto">
      <p-floatLabel>
        <p-inputNumber [(ngModel)]="dureeDetention" inputId="duree" [min]="0" [max]="50" />
        <label for="duree">Durée de détention (années)</label>
      </p-floatLabel>
    </div>
    <div class="flex-auto">
      <p-checkbox [(ngModel)]="estResidencePrincipale" binary="true" label="Résidence principale ?"></p-checkbox>

    </div>
    <div class="flex-auto">
      <button pButton label="Calculer" icon="pi pi-check"(click)="calculerPlusValue()" class="p-button-success"></button>

    </div>


  </div>

  <div *ngIf="plusValue !== null" class="resultats mt-4">
    <h3>Résultats</h3>
    <p><strong>Plus-value brute :</strong> {{ plusValue | number:'1.0-0' }} €</p>
    <p><strong>Imposition estimée :</strong> {{ impositionTotale | number:'1.0-0' }} €</p>
    <div *ngIf="estResidencePrincipale" class="text-green-600">
      ✅ Aucune imposition car c'est une résidence principale.
    </div>
  </div>

  <section class="faq-section mt-5">
    <h2>FAQ – Questions fréquentes sur la plus-value immobilière</h2>
    <dl>
      <dt>Qu’est-ce que la plus-value immobilière ?</dt>
      <dd>La différence entre le prix de vente et le prix d'achat, frais et travaux inclus.</dd>

      <dt>Quels sont les biens concernés ?</dt>
      <dd>Résidences secondaires, biens locatifs ou terrains.</dd>

      <dt>Comment est calculée la plus-value brute ?</dt>
      <dd>Prix de vente – (Prix d’achat + frais + travaux).</dd>

      <dt>Quels sont les taux d’imposition ?</dt>
      <dd>19% d’impôt + 17,2% de prélèvements sociaux, soit 36,2% avant abattements.</dd>

      <dt>Y a-t-il des abattements ?</dt>
      <dd>Oui, selon la durée de détention : exonération totale après 22 ans (impôt) ou 30 ans (prélèvements sociaux).
      </dd>

      <dt>Ma résidence principale est-elle imposable ?</dt>
      <dd>Non, en général elle est totalement exonérée.</dd>

      <dt>Puis-je déduire les travaux ?</dt>
      <dd>Oui, sur justificatifs ou via un forfait de 15% après 5 ans de détention.</dd>

      <dt>Comment déclarer la plus-value ?</dt>
      <dd>Par le notaire via le formulaire 2048-IMM au moment de la vente.</dd>

      <dt>Y a-t-il une surtaxe ?</dt>
      <dd>Oui, de 2% à 6% si la plus-value dépasse 50 000 € net.</dd>

      <dt>Et les impôts sur le revenu ?</dt>
      <dd>Utilisez notre <a href="https://calculateurfinance.fr/simulateur-impot-revenue" target="_blank">simulateur
          d'impôt sur le revenu</a> pour les déclarations annuelles.</dd>
    </dl>
  </section>
</main>