<main>
    <h1>Simulateur Micro-Entrepreneur</h1>
    <div class="separator"></div><br>
  <p>
        Ce simulateur vous permet d’estimer rapidement vos revenus en tant que micro-entrepreneur, 
        après déduction des cotisations sociales et de l’impôt sur le revenu. 
        Il prend en compte votre activité (vente, prestation de services, profession libérale), 
        le taux de charges applicable, ainsi que l’option éventuelle pour le versement libératoire.
    </p>
    <br>
    <form [formGroup]="form" (ngSubmit)="calculer()" class="form">
        <p-panel header="Paramètres du simulateur">

            <div class="flex-auto">
                <p-floatLabel>
                    <p-inputNumber formControlName="chiffreAffaires" mode="currency" currency="EUR"
                        minFractionDigits="0" maxFractionDigits="0" inputId="ca">
                    </p-inputNumber>
                    <label for="ca">Chiffre d'affaires annuel (€)</label>
                </p-floatLabel>
            </div>

            <div class="flex-auto">
                <p-floatLabel>
                    <p-dropdown formControlName="activite" inputId="activite" [options]="[
            { label: 'Vente de marchandises (BIC)', value: 'vente' },
            { label: 'Prestation de services (BIC)', value: 'prestation' },
            { label: 'Profession libérale (BNC)', value: 'liberale' }
          ]">
                    </p-dropdown>
                    <label for="activite">Activité</label>
                </p-floatLabel>
            </div>

            <div class="field col-12">
                <p-checkbox formControlName="versementLiberatoire" binary="true"
                    label="Versement libératoire de l'impôt sur le revenu">
                </p-checkbox>
            </div>

            <div class="flex-auto">
                <p-floatLabel>
                    <p-inputNumber formControlName="tauxSocial" mode="decimal" minFractionDigits="1"
                        maxFractionDigits="1" inputId="tauxSocial">
                    </p-inputNumber>
                    <label for="tauxSocial">Taux cotisations sociales (%)</label>
                </p-floatLabel>
            </div>

            <div class="flex-auto">
                <p-floatLabel>
                    <p-inputNumber formControlName="tauxVersement" mode="decimal" minFractionDigits="1"
                        maxFractionDigits="1" inputId="tauxVersement">
                    </p-inputNumber>
                    <label for="tauxVersement">Taux versement libératoire (%)</label>
                </p-floatLabel>

            </div>
        </p-panel>
        <div class="p-field p-col-12">
    <button pButton type="submit" label="Calculer" icon="pi pi-check" class="p-button-success"></button>
        </div>
    </form>

    <div *ngIf="resultat" class="p-mt-3">
        <h3>Résultats</h3>
        <ul>
            <li>Chiffre d'affaires : {{ resultat.ca | currency:'EUR' }}</li>
            <li>Cotisations sociales : {{ resultat.cotisations | currency:'EUR' }}</li>
            <li>Impôt sur le revenu : {{ resultat.impot | currency:'EUR' }}</li>
            <li><strong>Revenu brut : {{ resultat.brut | currency:'EUR' }}</strong></li>
            <li><strong>Revenu net : {{ resultat.net | currency:'EUR' }}</strong></li>
        </ul>
    </div>
 <br>
      <div class="separator"></div><br>

<h2>Comment fonctionne ce calcul ?</h2>
  <p>En micro-entreprise, vous payez des charges sociales calculées en pourcentage de votre chiffre d’affaires, 
    ainsi qu’un impôt sur le revenu. Si vous optez pour le versement libératoire, cet impôt est prélevé en même temps 
    que vos charges sociales, à un taux fixe qui dépend de votre activité :</p>
  <ul>
    <li>Vente de marchandises : 1 %</li>
    <li>Prestations de services commerciales ou artisanales : 1,7 %</li>
    <li>Professions libérales : 2,2 %</li>
  </ul>
  <p>Si vous n’optez pas pour le versement libératoire, votre impôt est calculé selon le barème progressif 
    de l’impôt sur le revenu, en fonction de vos autres revenus et de votre situation familiale.</p>

  <!-- FAQ -->
  <app-faq-section
    [title]="&quot;FAQ'&quot;"
    [faqItems]="faqItems"
    [ariaLabel]="&quot;Foire aux questions'&quot;">
  </app-faq-section>
</main>